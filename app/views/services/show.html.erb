
<p id="notice"><%= notice %></p>

<div class="wrapper">



  <div class="container">

    <!-- Detailed information about a service -->
    <div class="service-details">

      <div class="service-links">
        <% if @service.contractor.user == current_user %>
        <%= link_to 'Delete',  @service,  method: :delete, data: { confirm: 'Are you sure?' }%> |
        <%= link_to "Edit", "#", "data-toggle" => "modal", 'data-target' => '#editReviewModal' %> |
        <% end %>
        <%= link_to 'Back', services_path %>
      </div>

      <div class="service-name">
        <h2><%= @service.name %></h2>
        <h5><%= @service.location %></h5>
      </div>

      <div class="service-description">
        <p><%= @service.description %></p>
      </div>

      <div class="service-price">
        <p>â‚¬ <%= @service.price %></p>
      </div>

      <%= cl_image_tag(@service.photo,
      width: 300, height: 260, crop: :fill, class: 'service-image') %>


      <div class="service-book">
        <%= simple_form_for [@service,  @booking], wrapper: :inline_form, html: { class: 'form-inline' } do |f|%>
        <%= f.input :date, label: 'Booking date', required: false %>
        <%= f.submit "book", class: "btn btn-primary" %>
        <% end %>
      </div>


    </div>

    <h2>Reviews of this service (<%= @service.reviews.count %>)</h2>

    <!-- list of all the reviews for this service -->
    <div class="reviews-list">
      <% @service.reviews.each do |review| %>
      <div class="review">
        <img class="review-user" src="https://www.grabagardener.com/wp-content/themes/storefront-child/assets/img/gardener-profile-6.jpg">
        <div class="review-name">
          <h3><%= review.booking.client.user.first_name %> <%= review.booking.client.user.last_name %></h3>
          <p><%= review.booking.date %></p>
        </div>
        <div class="review-body">
          <p>
            <%= review.description %>
          </p>
        </div>
        <div class="review-status">
          <p class="status pending">Rating  </p>
          <p class="rating">
            <% review.rating.times do %>
            <i class="fas fa-star"></i>
            <% end %>
          </p>
        </div>
      </div>
      <% end %>
    </div>

    <!-- Button trigger modal -->


    <!-- Modal -->
    <div class="modal fade" id="editReviewModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <%= simple_form_for(@service) do |f| %>
            <%= f.error_notification %>

            <div class="form-inputs">
              <%=f.input :name %>
              <%=f.input :description %>
              <%=f.input :price %>
              <%=f.input :location %>
              <%=f.input :category %>
              <%=f.input :photo%>
              <%= f.input :photo_cache, as: :hidden %>
            </div>

            <div class="form-actions">
              <%= f.button :submit %>
            </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      $(function() {
        $('#booking_date').daterangepicker({
          singleDatePicker: true,
          showDropdowns: true
        },
        function(start, end, label) {

        });
      });
    </script>

